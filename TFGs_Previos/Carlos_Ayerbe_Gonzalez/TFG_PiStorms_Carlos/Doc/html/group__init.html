<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>PiStorms in MaRTe OS for RPI.: Initialize and set up de bank</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="uc.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PiStorms in MaRTe OS for RPI.
   &#160;<span id="projectnumber">V.1</span>
   </div>
   <div id="projectbrief">Lego Mindstorms&#39; sensors and actuators handlers for Raspberry Pi and MaRTE OS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Initialize and set up de bank</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1903c192bacbfdb5e8f3075528feda71"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__init.html#ga1903c192bacbfdb5e8f3075528feda71">pistorms_init</a> (void)</td></tr>
<tr class="memdesc:ga1903c192bacbfdb5e8f3075528feda71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the bcm2835 library and start I2C operations.  <a href="#ga1903c192bacbfdb5e8f3075528feda71">More...</a><br/></td></tr>
<tr class="separator:ga1903c192bacbfdb5e8f3075528feda71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5db8e593e665e3588e0834ee0ea85b9b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__init.html#ga5db8e593e665e3588e0834ee0ea85b9b">pistorms_close</a> (void)</td></tr>
<tr class="memdesc:ga5db8e593e665e3588e0834ee0ea85b9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the bcm2835 library and end I2C operations .  <a href="#ga5db8e593e665e3588e0834ee0ea85b9b">More...</a><br/></td></tr>
<tr class="separator:ga5db8e593e665e3588e0834ee0ea85b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97f8b6387a9a11f84cc1d84eb5878f04"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__init.html#ga97f8b6387a9a11f84cc1d84eb5878f04">_set_active_bank</a> (int connector_id)</td></tr>
<tr class="memdesc:ga97f8b6387a9a11f84cc1d84eb5878f04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the I2C slave address.  <a href="#ga97f8b6387a9a11f84cc1d84eb5878f04">More...</a><br/></td></tr>
<tr class="separator:ga97f8b6387a9a11f84cc1d84eb5878f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3eae4f3ae615d4b35ff05eb3f936534"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__init.html#gab3eae4f3ae615d4b35ff05eb3f936534">pistorms_get_device_id</a> (int connector_id)</td></tr>
<tr class="memdesc:gab3eae4f3ae615d4b35ff05eb3f936534"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the ID of the sensor.  <a href="#gab3eae4f3ae615d4b35ff05eb3f936534">More...</a><br/></td></tr>
<tr class="separator:gab3eae4f3ae615d4b35ff05eb3f936534"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These functions let you use bcm2835 library, i2c commands, select the correct bank and obtain the sensors id to future uses. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga97f8b6387a9a11f84cc1d84eb5878f04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int _set_active_bank </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connector_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the I2C slave address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connector_id</td><td>Bank and Port to plug the sensor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value of active_bank, -1 if is incorrect.</dd></dl>
<p>Sets the I2C slave address (BANK_A or BANK_B). But if the current slave address is the same than the connector_id, the function doesn't set again the slave address because it is not neccessary. </p>

<p>Definition at line <a class="el" href="marte__pistorms_8c_source.html#l00068">68</a> of file <a class="el" href="marte__pistorms_8c_source.html">marte_pistorms.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga5db8e593e665e3588e0834ee0ea85b9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pistorms_close </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the bcm2835 library and end I2C operations . </p>
<dl class="section return"><dt>Returns</dt><dd>return 1 if successful else 0.</dd></dl>
<p>Close the bcm2835 calling the function <a class="el" href="bcm2835_8h.html#a3a42892f61764132d106a4ae32271002">bcm2835_close()</a> and end I2C operations calling <a class="el" href="group__i2c.html#ga0a91c4c5cdfe6d7d8fc127b4f3122db4">bcm2835_i2c_end()</a>, if there is some error the function is going to return 0 , if not the function is going to return 1. </p>

<p>Definition at line <a class="el" href="marte__pistorms_8c_source.html#l00050">50</a> of file <a class="el" href="marte__pistorms_8c_source.html">marte_pistorms.c</a>.</p>

</div>
</div>
<a class="anchor" id="gab3eae4f3ae615d4b35ff05eb3f936534"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* pistorms_get_device_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connector_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the ID of the sensor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connector_id</td><td>Bank and Port to plug the sensor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the ID of the sensor if it is plugged in,if not error.</dd></dl>
<p>Obtains the ID of the Sensor which is plugged in the correct port of the Pistorms. For a correct result, it is neccesary to indicate the bank and port that the sensor is plugged in. If the sensor is connected in other port or bank, the function returns an error. </p>

<p>Definition at line <a class="el" href="marte__pistorms_8c_source.html#l00109">109</a> of file <a class="el" href="marte__pistorms_8c_source.html">marte_pistorms.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga1903c192bacbfdb5e8f3075528feda71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pistorms_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the bcm2835 library and start I2C operations. </p>
<dl class="section return"><dt>Returns</dt><dd>return 1 if successful else 0.</dd></dl>
<p>Initialize the bcm2835 calling the function <a class="el" href="bcm2835_8c.html#a9351fa3ec8eeff4e9d998d3d5d912a4f">bcm2835_init()</a> and start I2C operations calling <a class="el" href="group__i2c.html#gaae82c3f4b7dfb4dcb51358d1ae878029">bcm2835_i2c_begin()</a>, if there is some error the function is going to return 0 , if not the function is going to return 1. </p>
<p>&lt; Initialize bcm2835 and I2C </p>

<p>Definition at line <a class="el" href="marte__pistorms_8c_source.html#l00033">33</a> of file <a class="el" href="marte__pistorms_8c_source.html">marte_pistorms.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 12 2017 15:49:05 for PiStorms in MaRTe OS for RPI. by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
